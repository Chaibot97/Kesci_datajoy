?xgb.trai
library(xgboost)
?xgb.train
# Loading required packages
library(data.table)
# Loading data
dt_raw <- fread("data/train.csv")
getwd()
dir()
dir("data")
# Loading required packages
library(data.table)
# Loading data
getwd()
dt_raw <- fread("data/train.csv")
# Loading required packages
library(data.table)
# Loading data
dt_raw <- fread("../data/train.csv")
View(dt_raw)
dt_raw <- fread(file = "../data/train.csv", key = "id")
View(dt_raw)
rm(dt_raw)
dt_train <- fread(file = "../data/train.csv", key = "id")
dt_test <- fread(file = "../data/test.csv", key = "id")
dt_train[, -"satisfaction_level", with = F]
?rbindlist
dt_full <- rbindlist(
list("train" = dt_train, "test" = dt_test),
use.names = TRUE,
fill = TRUE,
idcol = "setID"
)
View(dt_full)
colnames(dt_full)
meta <- list(
match_key = "id",
target = "satisfaction_level",
feat_num = c(
"last_evaluation",
"number_project",
"average_monthly_hours",
"time_spend_company",
"Work_accident",
"salary",
"promotion_last_5years"
),
feat_cat = c(
"package",
"division"
)
)
length(unlist(meta))
ncol(dt_full)
# Meta data
meta <- list(
match_key = "id",
setID = "setID",
target = "satisfaction_level",
feat_num = c(
"last_evaluation",
"number_project",
"average_monthly_hours",
"time_spend_company",
"Work_accident",
"salary",
"promotion_last_5years"
),
feat_cat = c(
"package",
"division"
)
)
cnt_missing <- dt_full[, sapply(.SD, function(x) sum(is.na(x))), .SDcols = c(meta$feat_num, meta$feat_num)]
length(c(meta$feat_num, meta$feat_num))
cnt_missing <- dt_full[, sapply(.SD, function(x) sum(is.na(x))), .SDcols = c(meta$feat_num, meta$feat_cat)]
# Loading required packages
library(data.table)
library(ggplot2)
# Loading data
dt_train <- fread(file = "../data/train.csv", key = "id")
dt_test <- fread(file = "../data/test.csv", key = "id")
dt_full <- rbindlist(
list(train = dt_train, test = dt_test),
use.names = TRUE,
fill = TRUE,
idcol = "setID"
)
# Meta data
meta <- list(
match_key = "id",
setID = "setID",
target = "satisfaction_level",
feat_num = c(
"last_evaluation",
"number_project",
"average_monthly_hours",
"time_spend_company",
"Work_accident",
"salary",
"promotion_last_5years"
),
feat_cat = c(
"package",
"division"
)
)
# Missing value count over all predictors
cnt_missing <- dt_full[, sapply(.SD, function(x) sum(is.na(x))), .SDcols = c(meta$feat_num, meta$feat_cat)]
# No missing data
install.packages("ggcorrplot")
library(ggcorrplot)
corr_train <- cor(dt_train[, meta$feat_num, with = FALSE])
dt_train[, meta$feat_num, with = FALSE]
meta <- list(
match_key = "id",
setID = "setID",
target = "satisfaction_level",
feat_num = c(
"last_evaluation",
"number_project",
"average_monthly_hours",
"time_spend_company",
"Work_accident",
"promotion_last_5years"
),
feat_cat = c(
"salary",
"package",
"division"
)
)
corr_train <- cor(dt_train[, meta$feat_num, with = FALSE])
corr_test <- cor(dt_test[, meta$feat_num, with = FALSE])
corr_train_plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
title("Correlation Mat Train Set")
corr_train <- cor(dt_train[, meta$feat_num, with = FALSE])
corr_test <- cor(dt_test[, meta$feat_num, with = FALSE])
corr_train_plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Train Set")
corr_train_plt
corr_test_plt <- ggcorrplot(
corr_test,
hc.order = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Test Set")
corr_test_plt
corr_train
round(corr_train, 1)
round(corr_test, 1)
# Overall estimation of correlation
corr_train <- cor(dt_train[, meta$feat_num, with = FALSE])
corr_test <- cor(dt_test[, meta$feat_num, with = FALSE])
round(corr_train, 1)
round(corr_test, 1)
corr_train_plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Train Set")
corr_train_plt
corr_test_plt <- ggcorrplot(
corr_test,
hc.order = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Test Set")
corr_test_plt
# Overall estimation of correlation
corr_train <- cor(dt_train[, meta$feat_num, with = FALSE])
corr_test <- cor(dt_test[, meta$feat_num, with = FALSE])
round(corr_train, 1)
round(corr_test, 1)
corr_train_plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Train Set")
corr_train_plt
corr_test_plt <- ggcorrplot(
corr_test,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Test Set")
corr_test_plt
data.frame(round(corr_train, 1))
# Overall estimation of correlation
corr_train <- cor(dt_train[, meta$feat_num, with = FALSE])
corr_test <- cor(dt_test[, meta$feat_num, with = FALSE])
data.frame(round(corr_train, 1))
data.frame(round(corr_test, 1))
corr_train_plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Train Set")
corr_train_plt
corr_test_plt <- ggcorrplot(
corr_test,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Test Set")
corr_test_plt
# Overall estimation of correlation
corr_train <- cor(dt_train[, meta$feat_num, with = FALSE])
corr_test <- cor(dt_test[, meta$feat_num, with = FALSE])
data.frame(round(corr_train, 2))
data.frame(round(corr_test, 2))
corr_train_plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Train Set")
corr_train_plt
corr_test_plt <- ggcorrplot(
corr_test,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = "Correlation Mat Test Set")
corr_test_plt
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title)
return(list(mat = corr, plt = plt))
}
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
lab = TRUE,
p.mat = p_mat,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title)
return(list(mat = corr, plt = plt))
}
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
browser()
plt <- ggcorrplot(
corr_train,
hc.order = TRUE,
lab = TRUE,
p.mat = p_mat,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title)
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
p_mat
class(p_mat)
ggcorrplot(
corr_train,
hc.order = TRUE,
lab = TRUE,
p.mat = p_mat,
type = "lower",
outline.col = "white",
ggtheme = ggplot2::theme_gray,
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title)
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
browser()
plt <- ggcorrplot(
corr,
p.mat = p_mat,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title) +
theme_gray()
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr,
p.mat = p_mat,
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title) +
theme_gray()
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
corr_test$plt
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr,
p.mat = p_mat,
insig = "blank",
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title) +
theme_gray()
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
rm(corr_test_plt)
rm(corr_train_plt)
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr,
p.mat = p_mat,
insig = "blank",
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title) +
theme_gray()
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
corr_train$plt
corr_test$plt
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr,
p.mat = p_mat,
insig = "blank",
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title, x = '', y = '') +
theme_gray()
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
corr_train$plt
corr_test$plt
?ggsave
ggsave("../plot/corr-mat-train-full.jpg", plot = corr_train$plt)
dir("..")
ggsave("plot/corr-mat-train-full.jpg", plot = corr_train$plt)
ggsave("plot/corr-mat-train-full.jpg", plot = corr_train$plt, width = 10, height = 10)
ggsave("plot/corr-mat-train-full.jpg", plot = corr_train$plt, width = 8, height = 8)
ggsave("plot/corr-mat-train-full.jpg", plot = corr_train$plt, width = 8, height = 8, dpi = 320)
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr,
p.mat = p_mat,
insig = "blank",
hc.order = TRUE,
lab = TRUE,
type = "lower",
outline.col = "white",
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title, x = '', y = '')
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
ggsave("plot/corr-mat-train-full.jpg", plot = corr_train$plt, width = 10, height = 10, dpi = 320)
plt_corr_mat <- function(dt, vars, title = NULL) {
corr <- cor(dt[, vars, with = FALSE])
p_mat <- cor_pmat(dt[, vars, with = FALSE])
plt <- ggcorrplot(
corr,
p.mat = p_mat,
insig = "blank",
hc.order = TRUE,
lab = TRUE,
type = "lower",
ggtheme = theme_gray,
outline.col = "white",
colors = c("#6D9EC1", "white", "#E46726")
) +
labs(title = title, x = '', y = '')
return(list(mat = corr, plt = plt))
}
# Overall estimation of correlation
corr_train <- plt_corr_mat(dt_train, meta$feat_num, "Corr Mat Train Set Full")
corr_test <- plt_corr_mat(dt_test, meta$feat_num, "Corr Mat Test Set Full")
ggsave("plot/corr-mat-train-full.jpg", plot = corr_train$plt, width = 10, height = 10, dpi = 320)
ggsave("plot/corr-mat-train-full.jpg", plot = corr_train$plt, width = 8, height = 8, dpi = 640)
ggsave("plot/corr-mat-test-full.jpg", plot = corr_test$plt, width = 8, height = 8, dpi = 640)
